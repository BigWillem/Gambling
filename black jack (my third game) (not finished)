'''

Blackjack.py is a program that I made for myself to learn python syntax. it works
but not all blackjack features are present (doubling down, splitting etc.) this is simply because I do not know
how to implement features as these yet, so when I do I will probably be adding those features in.

'''

# note to self: when HOS input is stand you get HOS asked again, fix this.
# note to self: dealers sum was 24 and dealer won, fix this. (User Input path inside game func= hit, stand), fix this. 

import random
from time import sleep



def fumen():
    rq2 = ""
    while rq2 == "":
        rq2 = input("Would you like to play again? (Y/N): ").capitalize()
        if rq2 == "Y":
            game()
        elif rq2 == "N":
            print("Shutting down."); exit()



def game():
    # Values of letters and full stack of cards:
    value = {"J": 10,
             "Q": 10,
             "K": 10,
             "A": 11}

    cards = ["2H", "3H", "4H", "5H", "6H", "7H", "8H", "9H", "JH", "QH", "KH", "AH",
             "2D", "3D", "4D", "5D", "6D", "7D", "8D", "9D", "JD", "QD", "KD", "AD",
             "2S", "3S", "4S", "5S", "6S", "7S", "8S", "9S", "JS", "QS", "KS", "AS",
             "2C", "3C", "4C", "5C", "6C", "7C", "8C", "9C", "JC", "QC", "KC", "AC"]

    # Shuffle the cards per stack then shuffle the cards:
    random.shuffle(cards)

    # Dictate what cards will be dealt:
    first_card = cards[0]
    second_card = cards[2]
    third_card = cards[4]
    fourth_card = cards[6]
    dealer_first_card = cards[1]
    dealer_second_card = cards[3]
    dealer_third_card = cards[5]
    dealer_fourth_card = cards[7]

    # show the player the dealt cards:
    print(f"your cards are {first_card} and {second_card}")
    print(f"dealers first card is {dealer_first_card}")

    # Remove the letter after each number to make math easier
    first_card = first_card[:1]
    second_card = second_card[:1]
    third_card = third_card[:1]
    fourth_card = fourth_card[:1]
    dealer_first_card = dealer_first_card[:1]
    dealer_second_card = dealer_second_card[:1]
    dealer_third_card = dealer_third_card[:1]
    dealer_fourth_card = dealer_fourth_card[:1]
    # player_sum = int(first_card) + int(second_card)

    # Calculate the total sum of the players cards:
    try:
        player_sum = int(first_card[0]) + int(second_card[0])
        print(f"your sum is {player_sum}")
    except ValueError:
        if first_card != "A" and second_card != "A":
            try:
                player_sum = 10 + int(second_card[0])
                print(f"your sum is {player_sum}")
            except ValueError:
                try:
                    player_sum = int(first_card[0]) + 10
                    print(f"your sum is {player_sum}")
                except ValueError:
                    player_sum = 20
                    print(f"your sum is {player_sum}")
        else:
            if first_card == "A" and second_card == "A":
                player_sum = 12
                print("double ace ")
            if first_card == "A":
                try:
                    player_sum = 11 + int(second_card[0])
                    print(f"Player sum is {player_sum}")
                except ValueError:
                    player_sum = 21
                    print("Black Jack!")
                    fumen()
            if second_card == "A":
                try:
                    player_sum = int(first_card[0]) + 11
                    print(f"Player sum is {player_sum}")
                except ValueError:
                    player_sum = 21
                    print("Black Jack!")
                    fumen()

    # Calculate the total sum of the dealers cards:
    try:
        dealer_sum = int(dealer_first_card[0]) + int(dealer_second_card[0])
    except ValueError:
        if dealer_first_card != "A" and dealer_second_card != "A":
            try:
                dealer_sum = 10 + int(dealer_second_card[0])
            except ValueError:
                try:
                    dealer_sum = int(dealer_first_card[0]) + 10
                except ValueError:
                    dealer_sum = 20

        else:
            if dealer_first_card == "A" and dealer_second_card == "A":
                dealer_sum = 12
                print("double ace ")
            if dealer_first_card == "A":
                try:
                    dealer_sum = 11 + int(dealer_second_card[0])
                except ValueError:
                    dealer_sum = 21
                    print("dealer got Black Jack!")
                    fumen()
            if dealer_second_card == "A":
                try:
                    dealer_sum = int(dealer_first_card[0]) + 11
                except ValueError:
                    dealer_sum = 21
                    print("Dealer got black Jack!")
                    fumen()
    HoS = input("would you like to hit or to stand?: ")

    if HoS == "hit":
        try:
            player_sum = player_sum + int(third_card[0])
            print(F"your third card is {third_card}")
            print(f"your cards are {first_card}, {second_card}, {third_card}."
                  f"making your total sum {player_sum}")
            if player_sum > 21:
                print("bust")
                fumen()
        except ValueError:
            player_sum = player_sum + 10
            print(third_card)
            print(f"your total sum is: {player_sum}")
            if player_sum > 21:
                print("bust")
                fumen()
    if player_sum < 21:
        HoS2 = input("would you like to hit or stand?: ")
        if HoS2 == "hit":
            try:
                player_sum = player_sum + int(fourth_card[0])
                if player_sum > 21:
                    print(f"your fourth card is {fourth_card}, you've gone bust!")
                    fumen()
                if player_sum == 21:
                    print(f"21! you win")
                    fumen()
                else:
                    print(f"Your fourth card is {fourth_card} making your total sum {player_sum}")
                    if player_sum >= 21:
                        print("you've gone bust")
                        fumen()
                    else:
                        HoS3 = input("would you like to hit or stand?: ")
            except ValueError:
                player_sum = player_sum + 10

        if HoS2 == "stand":
            print(f"your cards are {first_card} and {second_card}. making your sum {player_sum}")
            print(f"the dealer got {dealer_first_card} and {dealer_second_card} making his sum {dealer_sum}");
            sleep(1)
            print(f"the dealers third card is {dealer_third_card}")
            try:
                dealer_sum = dealer_sum + int(dealer_third_card)
                print(f"The dealer's sum is {dealer_sum}")
                if dealer_sum > player_sum:
                    print("Dealer wins.")
                    fumen()
                else:
                    print("Player wins")
                    fumen()
            except ValueError:
                if dealer_third_card != "A":
                    dealer_sum = dealer_sum + 10
                    print(f"The dealer's sum is {dealer_sum}")
                    if dealer_sum > player_sum:
                        print("Dealer wins.")
                        fumen()
                    else:
                        print("Player wins")
                        fumen()
                else:
                    if dealer_sum <= 21:
                        dealer_sum = dealer_sum + 1
                        print(f"The dealer's sum is {dealer_sum}")
                        if dealer_sum > player_sum:
                            print("Dealer wins.")
                            fumen()
                        else:
                            print("Player wins")
                            fumen()
                    else:
                        dealer_sum = dealer_sum + 11
                        print(f"The dealer's sum is {dealer_sum}")
                        if dealer_sum > player_sum:
                            print("Dealer wins.")
                            fumen()
                        else:
                            print("Player wins")
                            fumen()

        if player_sum > 21:
            print("Bust! dealer wins ")
            fumen()
        if player_sum == 21 and dealer_sum > 21:
            print("player wins ")
            fumen()
    if HoS == "stand":
        print(f"The dealers second card is {dealer_second_card}")
        print(f"your total sum is {player_sum} and the dealers total sum is {dealer_sum}.")
        if dealer_sum > player_sum:
            print("The dealer wins ")
            fumen()
        if dealer_sum < player_sum:
            print("The player wins")
            fumen()


def startmen():
    print("Welcome to Willies gambling emporium")
    rq1 = ""
    while rq1 == "":
        rq1 = input("Would you like to play blackjack? (Y/N): ").capitalize()
        if rq1 == "Y":
            print("starting blackjack"); sleep(1)
            game()
        elif rq1 == "N":
            print("shutting down program")
        else:
            print("what.\n how did you even do that.")


startmen()
